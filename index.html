<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>倒计时示例</title>
  <style>
    /* 基本样式：居中、大字、数字块样式 */
    html,body{
      height:100%;
      margin:0;
      background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif;
      color:#fff;
    }
    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      box-sizing:border-box;
    }
    .card{
      background: rgba(255,255,255,0.06);
      padding:28px;
      border-radius:12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      text-align:center;
      max-width:920px;
      width:100%;
    }
    h1{ margin:0 0 12px; font-size:22px; letter-spacing:0.6px;}
    p.subtitle{ margin:0 0 18px; color:rgba(255,255,255,0.75); }

    .timer{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:12px;
    }
    .unit{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      padding:18px 22px;
      border-radius:8px;
      min-width:110px;
      box-shadow: inset 0 -4px 8px rgba(0,0,0,0.12);
    }
    .number{
      font-weight:700;
      font-size:36px;
      line-height:1;
      letter-spacing:1px;
    }
    .label{
      margin-top:6px;
      font-size:13px;
      color:rgba(255,255,255,0.8);
    }

    .expired{
      margin-top:16px;
      font-size:18px;
      color:#ffcccb;
      font-weight:600;
    }

    /* 响应式：在窄屏时缩小单元格宽度 */
    @media (max-width:520px){
      .unit{ min-width:72px; padding:12px 10px; }
      .number{ font-size:22px; }
      .label{ font-size:11px; }
    }

    /* 数字等宽样式，便于对齐 */
    .number, .label { font-variant-numeric: tabular-nums; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-live="polite">
      <h1>随机剩余时间倒计时</h1>
      <p class="subtitle">每次刷新页面会随机生成一个剩余时间。倒计时到达零时将显示“已到期”。</p>

      <div class="timer" id="timer">
        <div class="unit">
          <div class="number" id="years">00</div>
          <div class="label">年</div>
        </div>
        <div class="unit">
          <div class="number" id="days">00</div>
          <div class="label">月/日</div>
        </div>
        <div class="unit">
          <div class="number" id="hours">00</div>
          <div class="label">时</div>
        </div>
        <div class="unit">
          <div class="number" id="minutes">00</div>
          <div class="label">分</div>
        </div>
        <div class="unit">
          <div class="number" id="seconds">00</div>
          <div class="label">秒</div>
        </div>
      </div>

      <div id="status" class="expired" style="display:none;">已到期</div>
      <div style="margin-top:14px; font-size:13px; color:rgba(255,255,255,0.7);">
        随机规则示例：0-3年，0-364天，0-23小时，0-59分，0-59秒
      </div>
    </div>
  </div>

  <script>
    (function(){
      // 随机生成剩余时间各单元
      function randInt(min, max){
        return Math.floor(Math.random()*(max-min+1))+min;
      }

      // 随机规则：年0-3, 天0-364, 时0-23, 分0-59, 秒0-59
      var years = randInt(0,3);
      var days  = randInt(0,364);
      var hours = randInt(0,23);
      var mins  = randInt(0,59);
      var secs  = randInt(0,59);

      // 将这些转成总秒数（不精确到闰年等，仅按 1 年 = 365 天）
      var totalSeconds = secs + mins*60 + hours*3600 + days*86400 + years*365*86400;

      // 如果随机到0（极小概率），强制最小为5秒以便展示倒计时
      if (totalSeconds === 0) totalSeconds = 5;

      var elYears = document.getElementById('years');
      var elDays  = document.getElementById('days');
      var elHours = document.getElementById('hours');
      var elMins  = document.getElementById('minutes');
      var elSecs  = document.getElementById('seconds');
      var elStatus = document.getElementById('status');

      function pad(n, width){
        var s = String(n);
        while(s.length < width) s = '0' + s;
        return s;
      }

      // 将总秒数分解并显示
      function updateDisplay(t){
        if (t <= 0){
          elYears.textContent = '00';
          elDays.textContent  = '00';
          elHours.textContent = '00';
          elMins.textContent  = '00';
          elSecs.textContent  = '00';
          elStatus.style.display = 'block';
          return;
        } else {
          elStatus.style.display = 'none';
        }

        var seconds = t % 60;
        var minutes = Math.floor(t / 60) % 60;
        var hours   = Math.floor(t / 3600) % 24;
        var daysAll = Math.floor(t / 86400);
        var years  = Math.floor(daysAll / 365);
        var days   = daysAll % 365;

        elYears.textContent = pad(years, 2);
        // 为了保持“年月日时分秒”的显示，我把天数显示为月/日位（即-days），如果你想显示真实月份可以改逻辑。
        elDays.textContent = pad(days, 3); // 天数可能超过两位，显示三位以便区分
        elHours.textContent = pad(hours, 2);
        elMins.textContent = pad(minutes, 2);
        elSecs.textContent = pad(seconds, 2);
      }

      // 以绝对时间为基准的倒计时（避免页面切换导致计时偏移）
      var endTime = Date.now() + totalSeconds * 1000;

      // 首次渲染
      updateDisplay(Math.ceil((endTime - Date.now())/1000));

      // 每秒更新（使用 setInterval，并在可见性变化时校准）
      var timerId = setInterval(function(){
        var remain = Math.ceil((endTime - Date.now())/1000);
        if (remain <= 0){
          clearInterval(timerId);
          updateDisplay(0);
        } else {
          updateDisplay(remain);
        }
      }, 250); // 250ms 以更平滑并及时响应（不会错过整秒）

      // 当页面从隐藏变为显示时，立即校准显示
      document.addEventListener('visibilitychange', function(){
        if (!document.hidden){
          var remain = Math.ceil((endTime - Date.now())/1000);
          if (remain <= 0){
            clearInterval(timerId);
            updateDisplay(0);
          } else {
            updateDisplay(remain);
          }
        }
      });
    })();
  </script>
</body>
</html>
